{% comment %}
  NUSENSE TryON Button - Shopify Liquid Template
  Add this to your product template to include the virtual try-on button
{% endcomment %}

{% unless nusense_tryon_disabled %}
  <button 
    id="nusense-tryon-btn" 
    class="nusense-tryon-button btn btn-primary"
    style="
      background: linear-gradient(135deg, #ce0003, #ff1a1d);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin: 10px 0;
    "
    onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'"
    onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.1)'"
  >
    <span>âœ¨</span>
    {% if settings.nusense_button_text %}
      {{ settings.nusense_button_text }}
    {% else %}
      Try Now
    {% endif %}
  </button>

  <script>
    // Product data for NUSENSE widget
    window.NUSENSE_PRODUCT_DATA = {
      title: "{{ product.title | escape }}",
      price: "{{ product.price | money }}",
      images: [
        {% for image in product.images limit: 10 %}
          "{{ image | img_url: '800x800' }}"{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ],
      description: "{{ product.description | strip_html | truncate: 200 | escape }}",
      variants: [
        {% for variant in product.variants %}
          {
            id: {{ variant.id }},
            title: "{{ variant.title | escape }}",
            price: "{{ variant.price | money }}",
            available: {{ variant.available }},
            {% if variant.option1 %}option1: "{{ variant.option1 | escape }}",{% endif %}
            {% if variant.option2 %}option2: "{{ variant.option2 | escape }}",{% endif %}
            {% if variant.option3 %}option3: "{{ variant.option3 | escape }}"{% endif %}
          }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ],
      url: "{{ shop.url }}{{ product.url }}",
      shop: {
        name: "{{ shop.name | escape }}",
        domain: "{{ shop.permanent_domain }}"
      }
    };
  </script>
{% endunless %}
